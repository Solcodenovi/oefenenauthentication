[{"C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\index.js":"1","C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\App.js":"2","C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\reportWebVitals.js":"3","C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Pages\\Home.js":"4","C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Pages\\Register.js":"5","C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Pages\\Login.js":"6","C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Components\\LoginForm\\index.js":"7","C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Components\\RegisterForm\\index.js":"8","C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Components\\Home\\index.js":"9","C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Components\\Context\\AuthContext.js":"10","C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Components\\Pages\\Account.js":"11","C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Routing\\ProtectedRoute.js":"12"},{"size":702,"mtime":1611066568294,"results":"13","hashOfConfig":"14"},{"size":1558,"mtime":1611576077291,"results":"15","hashOfConfig":"14"},{"size":362,"mtime":499162500000,"results":"16","hashOfConfig":"14"},{"size":118,"mtime":1610889503426,"results":"17","hashOfConfig":"14"},{"size":197,"mtime":1610903722831,"results":"18","hashOfConfig":"14"},{"size":185,"mtime":1610897428327,"results":"19","hashOfConfig":"14"},{"size":2458,"mtime":1611505222717,"results":"20","hashOfConfig":"14"},{"size":3296,"mtime":1611168713688,"results":"21","hashOfConfig":"14"},{"size":337,"mtime":1610907122137,"results":"22","hashOfConfig":"14"},{"size":2524,"mtime":1611498462705,"results":"23","hashOfConfig":"14"},{"size":854,"mtime":1611170620222,"results":"24","hashOfConfig":"14"},{"size":433,"mtime":1611575865606,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"m4vuu8",{"filePath":"29","messages":"30","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"28"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"28"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\index.js",[],["54","55"],"C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\App.js",["56","57"],"C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\reportWebVitals.js",[],"C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Pages\\Home.js",[],"C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Pages\\Register.js",[],"C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Pages\\Login.js",[],"C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Components\\LoginForm\\index.js",["58"],"import React from \"react\";\r\nimport \"./LoginForm.css\";\r\nimport {useForm} from \"react-hook-form\";\r\nimport {IoWarningOutline} from \"react-icons/all\";\r\nimport axios from \"axios\";\r\nimport {AuthContext,useAuthState} from \"../Context/AuthContext\";\r\nimport {Link, useHistory} from 'react-router-dom';\r\nimport{useEffect, useContext} from 'react';\r\n\r\n\r\n//\r\n\r\nexport default function LoginForm(){\r\n\r\n    const {login} = useContext(AuthContext);\r\n    const {isAuthenticated} = useAuthState();\r\n\r\n    const {register,handleSubmit,errors} =useForm();\r\n\r\n    async function onSubmit (data) {\r\n        console.log(\"Wat is er ingevuld\", data);\r\n        try {\r\n            const response = await axios.post(`https://polar-lake-14365.herokuapp.com/api/auth/signin`,\r\n                {\r\n                    username: data.username,\r\n                    password: data.password,\r\n\r\n                }\r\n            )\r\n            login(response.data);\r\n        } catch (error){\r\n        }\r\n    }\r\n\r\n\r\n\r\n    // context-functies\r\n\r\n\r\n    // react-router dingen\r\n    const history = useHistory();\r\n\r\n    // Deze functie wordt elke keer afgevuurd als isAuthenticated (uit context) veranderd\r\n    useEffect(() => {\r\n        // als hij de waarde true heeft, DAN sturen we de gebruiker door!\r\n        if (isAuthenticated === true) {\r\n            history.push('/Account');\r\n        }\r\n\r\n        console.log(isAuthenticated);\r\n    }, [isAuthenticated]);\r\n\r\n\r\n\r\n    return <form className=\"loginContainer\" onSubmit={handleSubmit(onSubmit)}>\r\n\r\n        <label htmlFor='username'>Username</label>\r\n        <input name=\"username\" type=\"text\" ref={register({required : true})}/>\r\n        {errors.username && errors.username.type === \"required\" &&\r\n        (<p><IoWarningOutline/> This field is required!</p>)}\r\n\r\n        <label htmlFor='password'>Password</label>\r\n        <input name=\"password\" type=\"password\" ref={register({required : true})}/>\r\n        {errors.password && errors.password.type === \"required\" &&\r\n        (<p><IoWarningOutline/> Password is required!</p>)}\r\n\r\n        {/*<label htmlFor='email'>Email</label>*/}\r\n        {/*<input name=\"email\" type=\"email\" ref={register({required : true})}/>*/}\r\n        {/*{errors.email && errors.email.type === \"required\" &&*/}\r\n        {/*(<p><IoWarningOutline/> Email is required!</p>)}*/}\r\n        <input type=\"submit\"/>\r\n        <p>Heb je nog geen account? <Link to=\"/Register\">Registreer</Link> je dan eerst.</p>\r\n        </form>;\r\n}\r\n","C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Components\\RegisterForm\\index.js",[],["59","60"],"C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Components\\Home\\index.js",[],"C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Components\\Context\\AuthContext.js",["61"],"import React, { createContext, useContext, useEffect, useState } from 'react';\r\n\r\nconst AuthContext = createContext({});\r\n\r\nfunction AuthContextProvider({ children }) {\r\n    const [authState, setAuthState] = useState({\r\n        status: 'pending',\r\n        error: null,\r\n        user: null,\r\n    })\r\n    useEffect(() => {\r\n        // haal uit de local storage de JWT Token\r\n        // Als die er niet is, kunnen we gewoon verder\r\n        // Als die token er wel is, dan betekent dat dat de applicatie herstart is\r\n        // En dan willen we nog even onze gebruikersdata (username, etc.) ophalen.\r\n        setTimeout(() => {\r\n            // er is geen token, dus we beginnen met een schone lei!\r\n            setAuthState({\r\n                ...authState,\r\n                status: 'done',\r\n            })\r\n        }, 2000)\r\n    }, []);\r\n\r\n    function login(data) {\r\n        // 1. de token willen we in de local storage zetten\r\n        localStorage.setItem('token', data.accessToken);\r\n         console.log(data)\r\n        // 2. de user-informatie willen we in de context zetten\r\n        setAuthState({\r\n            ...authState,\r\n            user: {\r\n                username: data.username,\r\n                email: data.email,\r\n                roles: data.roles,\r\n            }\r\n        })\r\n\r\n        // 3. als dat allemaal gelukt is, willen we doorgelinkt worden naar de profielpagina!\r\n        // Dit doen we in het component dat deze functie aanroept, zelf!\r\n    }\r\n\r\n    function logout() {\r\n        // doe dingen\r\n        localStorage.clear();\r\n        setAuthState({\r\n            ...authState,\r\n            user:null,\r\n\r\n        })\r\n    }\r\n\r\n    // const providerData = {\r\n    //   ...authState,\r\n    //   login,\r\n    //   logout,\r\n    // }\r\n\r\n    return (\r\n        <AuthContext.Provider value={{...authState,login,logout}}>\r\n            {authState.status === 'done' && children}\r\n            {authState.status === 'pending' && <p>Loading...</p>}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\nfunction useAuthState() {\r\n    const authState = useContext(AuthContext);\r\n    // iemand is geauthoriseerd wanneer de status === 'done'\r\n    // en als er een gebruiker in de authState staat\r\n    const isDone = authState.status === 'done';\r\n    const isAuthenticated = authState.user !== null && isDone;\r\n    console.log('Ik ben authenticated:', isAuthenticated);\r\n    return {\r\n        ...authState,\r\n        isAuthenticated: isAuthenticated,\r\n    }\r\n}\r\nexport {\r\n    AuthContext,\r\n    useAuthState,\r\n    AuthContextProvider,\r\n}","C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Components\\Pages\\Account.js",[],"C:\\Users\\soepi\\WebstormProjects\\oefenenauthenticatie\\src\\Routing\\ProtectedRoute.js",[],{"ruleId":"62","replacedBy":"63"},{"ruleId":"64","replacedBy":"65"},{"ruleId":"66","severity":1,"message":"67","line":15,"column":3,"nodeType":"68","messageId":"69","endLine":15,"endColumn":11},{"ruleId":"66","severity":1,"message":"70","line":25,"column":16,"nodeType":"68","messageId":"69","endLine":25,"endColumn":31},{"ruleId":"71","severity":1,"message":"72","line":51,"column":8,"nodeType":"73","endLine":51,"endColumn":25,"suggestions":"74"},{"ruleId":"62","replacedBy":"75"},{"ruleId":"64","replacedBy":"76"},{"ruleId":"71","severity":1,"message":"77","line":23,"column":8,"nodeType":"73","endLine":23,"endColumn":10,"suggestions":"78"},"no-native-reassign",["79"],"no-negated-in-lhs",["80"],"no-unused-vars","'Redirect' is defined but never used.","Identifier","unusedVar","'isAuthenticated' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.","ArrayExpression",["81"],["79"],["80"],"React Hook useEffect has a missing dependency: 'authState'. Either include it or remove the dependency array. You can also do a functional update 'setAuthState(a => ...)' if you only need 'authState' in the 'setAuthState' call.",["82"],"no-global-assign","no-unsafe-negation",{"desc":"83","fix":"84"},{"desc":"85","fix":"86"},"Update the dependencies array to be: [history, isAuthenticated]",{"range":"87","text":"88"},"Update the dependencies array to be: [authState]",{"range":"89","text":"90"},[1402,1419],"[history, isAuthenticated]",[828,830],"[authState]"]